<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–∞–ª–µ—Ä–µ—è –ò—Å–∫—É—Å—Å—Ç–≤–∞</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&display=swap" rel="stylesheet">
    <style>
        :root {
            /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ (—É–≤–µ–ª–∏—á–µ–Ω –≤ 1.5 —Ä–∞–∑–∞ –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ 1rem) */
            --title-min-desktop: 1.5rem;
            /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ 1.5 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–≥–æ) */
            --title-min-mobile: calc(var(--title-min-desktop) * 1.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #000;
            min-height: 100vh;
            overflow-x: hidden;
            overflow-y: auto;
            position: relative;
        }

        /* –ó–≤—ë–∑–¥–Ω–æ–µ –Ω–µ–±–æ */
        body::before {
            content: '';
            position: fixed;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20% 30%, white, transparent),
                radial-gradient(2px 2px at 60% 70%, white, transparent),
                radial-gradient(1px 1px at 50% 50%, white, transparent),
                radial-gradient(1px 1px at 80% 10%, white, transparent),
                radial-gradient(2px 2px at 90% 60%, white, transparent),
                radial-gradient(1px 1px at 33% 80%, white, transparent),
                radial-gradient(1px 1px at 15% 60%, white, transparent);
            background-size: 200% 200%;
            background-position: 0% 0%;
            opacity: 0.4;
            z-index: 0;
        }

        .container {
            width: 100%;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1500px;
            position: relative;
            z-index: 1;
            padding: 80px 20px 60px;
        }

        .header {
            position: fixed;
            inset: 0;
            z-index: 10;
            pointer-events: none;
            overflow: hidden;
        }

        .header p {
            position: absolute;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            font-weight: 300;
            white-space: nowrap;
            margin: 0;
        }

        /* –í–µ—Ä—Ö–Ω—è—è –ø–æ–ª–æ—Å–∞ - –¥–≤–∏–∂–µ—Ç—Å—è –≤–ª–µ–≤–æ */
        .header-top {
            top: 20px;
            left: 0;
            width: max-content;
            animation: scrollLeft 60s linear infinite;
        }

        @keyframes scrollLeft {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            animation: pulse 1.5s ease-in-out infinite;
            font-family: 'Rubik Mono One', monospace;
        }

        .artwork-container {
            width: 100%;
            max-width: 1400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            animation: fadeIn 1s ease-in;
        }

        /* –í–µ—Ä—Ö–Ω–∏–π —Ç–µ–∫—Å—Ç (–Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ—Ä) - –§–ò–ö–°–ò–†–û–í–ê–ù–ù–û–ï –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ */
        .text-top {
            position: fixed;
            top: 80px; /* –°—Ç–∞—Ä—Ç–æ–≤—ã–π –æ—Ç—Å—Ç—É–ø –æ—Ç –±–µ–≥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏ */
            left: 50%;
            transform: translateX(-50%) perspective(800px) rotateX(-45deg);
            transform-origin: top center;
            width: 100%;
            max-width: 900px;
            text-align: center;
            z-index: 3;
            padding: 0 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            pointer-events: none;
        }

        .title {
            font-family: 'Rubik Mono One', monospace;
            font-weight: 400;
            background: linear-gradient(to bottom, #e31227, #730b16);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            line-height: 1.1;
            letter-spacing: 0.03em;
            width: 100%;
            /* –†–∞–∑–º–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript */
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .author {
            font-family: 'Rubik Mono One', monospace;
            font-size: clamp(0.8rem, 1.5vw, 1.2rem);
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
            letter-spacing: 0.05em;
            width: 100%;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –º–∞—Å–∫–æ–π */
        .image-container {
            width: 100%;
            max-width: 900px;
            position: relative;
            margin: 20px 0;
            padding: 0 20px;
        }

        .image-mask {
            width: 100%;
            max-width: 100%;
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 
                0 0 80px rgba(255, 215, 0, 0.3),
                inset 0 0 100px rgba(0, 0, 0, 0.6);
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è –∏–∑ —Ç–µ–º–Ω–æ—Ç—ã - —Ä–∞–∑–º—ã—Ç—ã–µ –∫—Ä–∞—è */
        .image-mask::before {
            content: '';
            position: absolute;
            inset: 0;
            background: 
                linear-gradient(to right, rgba(0,0,0,0.9) 0%, transparent 15%, transparent 85%, rgba(0,0,0,0.9) 100%),
                linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, transparent 15%, transparent 85%, rgba(0,0,0,0.9) 100%);
            z-index: 2;
            pointer-events: none;
        }

        /* –í–Ω–µ—à–Ω–µ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
        .image-mask::after {
            content: '';
            position: absolute;
            inset: -30px;
            background: radial-gradient(ellipse at center, transparent 40%, black 100%);
            filter: blur(40px);
            z-index: -1;
        }

        .image-mask img {
            width: 100%;
            height: auto;
            display: block;
            position: relative;
            z-index: 1;
            filter: brightness(0.9) contrast(1.1);
            opacity: 0;
            transform: scale(1.05);
            transition: opacity 1.5s ease-out, transform 2s ease-out;
        }

        .image-mask img.loaded {
            opacity: 1;
            transform: scale(1);
        }

        .no-image {
            width: 100%;
            aspect-ratio: 4/3;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.3);
            font-size: 1rem;
            background: rgba(0, 0, 0, 0.5);
        }

        /* –ù–∏–∂–Ω–∏–π —Ç–µ–∫—Å—Ç (–º—É–∑–µ–π, –ø–µ—Ä–∏–æ–¥, —Ç–µ—Ö–Ω–∏–∫–∞) - —É—Ö–æ–¥–∏—Ç –í–í–ï–†–• –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é */
        .text-bottom {
            width: 100%;
            max-width: 1000px;
            text-align: center;
            margin-top: 30px;
            transform-origin: bottom center;
            padding: 0 20px;
        }

        .info-row {
            margin: 12px 0;
        }

        .info-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: rgba(255, 215, 0, 0.7);
            margin-bottom: 4px;
            font-weight: 600;
        }

        .info-value {
            font-size: clamp(0.9rem, 2vw, 1.2rem);
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.4;
            letter-spacing: 0.05em;
        }

        .id-value {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.4);
            margin-top: 20px;
            letter-spacing: 0.1em;
        }

        /* –§—É—Ç–µ—Ä —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π */
        .footer {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 10;
            width: 100%;
        }

        /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω–∞—è –ª–∏–Ω–∏—è –ø–µ—Ä–µ–¥ —Ñ—É—Ç–µ—Ä–æ–º */
        .footer::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.5), transparent);
        }

        .footer-text {
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.65rem;
            letter-spacing: 0.05em;
            line-height: 1.4;
        }

        .footer-link {
            color: rgba(255, 215, 0, 0.6);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-link:hover {
            color: rgba(255, 215, 0, 0.9);
            text-decoration: underline;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.4;
            }
        }

        /* –ù–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
        @keyframes imageReveal {
            0% {
                opacity: 0;
                transform: scale(1.08);
                filter: brightness(0.3) contrast(0.7);
            }
            70% {
                opacity: 0.8;
                filter: brightness(0.8) contrast(1);
            }
            100% {
                opacity: 1;
                transform: scale(1);
                filter: brightness(0.9) contrast(1.1);
            }
        }

        .image-reveal {
            animation: imageReveal 2.5s ease-out forwards;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤ */
        @media (max-width: 1024px) {
            .container {
                padding: 70px 15px 50px;
            }

            .text-top {
                top: 70px;
                max-width: 700px;
            }

            .text-bottom {
                margin-top: 25px;
            }

            .image-container {
                max-width: 700px;
                margin: 15px 0;
            }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 768px) {
            .container {
                padding: 50px 10px 40px;
            }

            .header p {
                font-size: 0.65rem;
            }

            .header-top {
                top: 10px;
            }

            .text-top {
                top: 50px;
                transform: translateX(-50%) perspective(500px) rotateX(-35deg);
                max-width: 100%;
            }

            .text-bottom {
                margin-top: 20px;
            }

            .image-container {
                max-width: 100%;
                margin: 15px 0;
            }

            .image-mask {
                border-radius: 8px;
            }

            .info-row {
                margin: 10px 0;
            }

            .footer {
                bottom: 15px;
            }

            .footer-text {
                font-size: 0.6rem;
                padding: 0 10px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 45px 10px 30px;
            }

            .text-top {
                top: 45px;
            }

            .text-bottom {
                margin-top: 15px;
            }

            .info-row {
                margin: 8px 0;
            }

            .id-value {
                margin-top: 15px;
            }

            .footer {
                bottom: 10px;
            }
        }

        /* –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (min-width: 1920px) {
            .container {
                padding: 100px 40px 80px;
            }

            .artwork-container {
                max-width: 1600px;
            }

            .image-container {
                max-width: 1200px;
            }

            .text-top, .text-bottom {
                max-width: 1200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <p class="header-top">–°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –º—É–∑–µ–µ–≤ ‚Ä¢ –°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –º—É–∑–µ–µ–≤ ‚Ä¢ –°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –º—É–∑–µ–µ–≤ ‚Ä¢ –°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –º—É–∑–µ–µ–≤ ‚Ä¢ –°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –º—É–∑–µ–µ–≤ ‚Ä¢ –°–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –º—É–∑–µ–µ–≤ ‚Ä¢ </p>
        </div>

        <div id="app">
            <div class="loading">–∂–∏–≤—É-–≤–∏–∂—É</div>
        </div>

        <div class="footer">
            <div class="footer-text">
                –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ. –ê–≤—Ç–æ—Ä: <a href="https://www.dying.fun" class="footer-link" target="_blank">–ú–∏—Ö–∞–∏–ª –ú–∞–∫—Å–∏–º–æ–≤</a>
            </div>
        </div>
    </div>

    <script>
        const FUNCTION_URL = 'https://d5dos0886b1g86mpgl8d.pdkwbi1w.apigw.yandexcloud.net';

        function getProxyUrl(originalUrl) {
            if (!originalUrl) return '';
            const match = originalUrl.match(/\/([^\/?#]+)$/);
            const id = match ? match[1] : '';
            return id ? `${FUNCTION_URL}/proxy/${id}` : '';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å —É—á–µ—Ç–æ–º –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã
        function calculateTitleFontSize(titleLength) {
            const isMobile = window.innerWidth <= 768;
            
            // –ü–æ–ª—É—á–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
            const rootStyles = getComputedStyle(document.documentElement);
            const minDesktop = parseFloat(rootStyles.getPropertyValue('--title-min-desktop'));
            const minMobile = parseFloat(rootStyles.getPropertyValue('--title-min-mobile'));
            
            const minSize = isMobile ? minMobile : minDesktop;
            
            let multiplier;
            
            if (titleLength <= 20) {
                multiplier = 2.5;
            } else if (titleLength <= 40) {
                multiplier = 2;
            } else if (titleLength <= 50) {
                multiplier = 1.5;
            } else {
                multiplier = 1;
            }
            
            return minSize * multiplier;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å —É—á–µ—Ç–æ–º –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã
        function calculateTitleHeight(name, fontSize) {
            const tempElement = document.createElement('div');
            tempElement.style.cssText = `
                position: absolute;
                left: -9999px;
                top: -9999px;
                width: 900px;
                max-width: 90vw;
                font-family: 'Rubik Mono One', monospace;
                font-size: ${fontSize}rem;
                line-height: 1.1;
                letter-spacing: 0.03em;
                word-wrap: break-word;
                overflow-wrap: break-word;
                padding: 0 20px;
                text-align: center;
                transform: perspective(800px) rotateX(-45deg);
                transform-origin: top center;
            `;
            tempElement.textContent = name;
            
            document.body.appendChild(tempElement);
            const height = tempElement.offsetHeight;
            document.body.removeChild(tempElement);
            
            return height;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
        function calculateTitleLines(name, fontSize) {
            const tempElement = document.createElement('div');
            tempElement.style.cssText = `
                position: absolute;
                left: -9999px;
                top: -9999px;
                width: 900px;
                max-width: 90vw;
                font-family: 'Rubik Mono One', monospace;
                font-size: ${fontSize}rem;
                line-height: 1.1;
                letter-spacing: 0.03em;
                word-wrap: break-word;
                overflow-wrap: break-word;
                padding: 0 20px;
                text-align: center;
            `;
            tempElement.textContent = name;
            
            document.body.appendChild(tempElement);
            const height = tempElement.offsetHeight;
            document.body.removeChild(tempElement);
            
            // –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–∏–º–µ—Ä–Ω—É—é –≤—ã—Å–æ—Ç—É –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (fontSize * line-height –≤ –ø–∏–∫—Å–µ–ª—è—Ö)
            const lineHeight = fontSize * 1.1 * 16; // –ø–µ—Ä–µ–≤–æ–¥–∏–º rem –≤ px
            const estimatedLines = Math.ceil(height / lineHeight);
            
            return estimatedLines;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—Å—Ç—É–ø–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
        function calculateTitleTopOffset(titleHeight, titleLines, imageUrl) {
            const isMobile = window.innerWidth <= 768;
            const isTablet = window.innerWidth <= 1024;
            
            // –ë–∞–∑–æ–≤—ã–π –æ—Ç—Å—Ç—É–ø –æ—Ç –±–µ–≥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏
            let baseOffset;
            if (isMobile) {
                baseOffset = 50;
            } else if (isTablet) {
                baseOffset = 70;
            } else {
                baseOffset = 80;
            }

            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ—Ç—Å—Ç—É–ø –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
            let offsetMultiplier = 1;
            if (titleHeight > 150) {
                offsetMultiplier = 1.8;
            } else if (titleHeight > 120) {
                offsetMultiplier = 1.5;
            } else if (titleHeight > 90) {
                offsetMultiplier = 1.2;
            }

            return baseOffset * offsetMultiplier;
        }

        function renderArtwork(artwork) {
            const data = artwork.data || {};
            
            const imageUrl = data.images && data.images.length > 0 
                ? getProxyUrl(data.images[0]?.url) 
                : '';

            const name = data.name || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
            const titleLength = name.length;
            const fontSize = calculateTitleFontSize(titleLength);
            
            // –í—ã—á–∏—Å–ª—è–µ–º –≤—ã—Å–æ—Ç—É –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
            const titleHeight = calculateTitleHeight(name, fontSize);
            const titleLines = calculateTitleLines(name, fontSize);
            
            // –í—ã—á–∏—Å–ª—è–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –æ—Ç—Å—Ç—É–ø
            const titleTopOffset = calculateTitleTopOffset(titleHeight, titleLines, imageUrl);

            let authors = '';
            if (data.authors) {
                if (Array.isArray(data.authors)) {
                    authors = data.authors.join(', ');
                } else {
                    authors = data.authors;
                }
            }
            
            const technologies = data.technologies && data.technologies.length > 0
                ? data.technologies.join(', ')
                : '';
            
            const museum = data.museum?.name || '';
            const period = data.periodStr || '';
            const nativeId = artwork.nativeId || data.id || '';

            console.log('Rendering artwork:', { 
                name, 
                titleLength, 
                fontSize, 
                titleHeight,
                titleLines,
                titleTopOffset,
                authors, 
                technologies, 
                museum, 
                period, 
                nativeId, 
                imageUrl 
            });

            return `
                <div class="artwork-container">
                    <!-- –í–µ—Ä—Ö–Ω–∏–π —Ç–µ–∫—Å—Ç - –§–ò–ö–°–ò–†–û–í–ê–ù–ù–û–ï –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ -->
                    <div class="text-top" style="top: ${titleTopOffset}px;">
                        <h1 class="title" style="font-size: ${fontSize}rem;">${name}</h1>
                        ${authors ? `<div class="author">${authors}</div>` : ''}
                    </div>

                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π –º–∞—Å–∫–æ–π -->
                    <div class="image-container">
                        <div class="image-mask">
                            ${imageUrl ? `
                                <img src="${imageUrl}" 
                                     alt="${name}" 
                                     onload="this.classList.add('image-reveal'); adjustForVerticalImage(this, ${titleLines}, ${titleTopOffset})"
                                     onerror="console.log('‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º...'); setTimeout(() => location.reload(), 500);">
                            ` : '<div class="no-image">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</div>'}
                        </div>
                    </div>

                    <!-- –ù–∏–∂–Ω–∏–π —Ç–µ–∫—Å—Ç - —É—Ö–æ–¥–∏—Ç –≤–≤–µ—Ä—Ö –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é -->
                    <div class="text-bottom">
                        ${museum ? `
                            <div class="info-row">
                                <div class="info-label">–ú—É–∑–µ–π</div>
                                <div class="info-value">${museum}</div>
                            </div>
                        ` : ''}
                        
                        ${period ? `
                            <div class="info-row">
                                <div class="info-label">–ü–µ—Ä–∏–æ–¥</div>
                                <div class="info-value">${period}</div>
                            </div>
                        ` : ''}
                        
                        ${technologies ? `
                            <div class="info-row">
                                <div class="info-label">–¢–µ—Ö–Ω–∏–∫–∞</div>
                                <div class="info-value">${technologies}</div>
                            </div>
                        ` : ''}

                        <div class="id-value">ID: ${nativeId}</div>
                    </div>
                </div>
            `;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –æ—Ç—Å—Ç—É–ø–∞ –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        function adjustForVerticalImage(imgElement, titleLines, currentOffset) {
            const aspectRatio = imgElement.naturalWidth / imgElement.naturalHeight;
            console.log('üìê Aspect ratio –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏:', aspectRatio);
            console.log('üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –∑–∞–≥–æ–ª–æ–≤–∫–∞:', titleLines);
            
            const textTopElement = document.querySelector('.text-top');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏–µ: –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (aspect ratio < 0.75) + –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫ (>4)
            if (aspectRatio < 0.75 && titleLines > 4) {
                // –í—ã—á–∏—Å–ª—è–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å: 1.5 / aspect ratio
                const aspectMultiplier = 1.5 / aspectRatio;
                console.log('üéØ –£—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ + –º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫');
                console.log('üìà –ú–Ω–æ–∂–∏—Ç–µ–ª—å –æ—Ç—Å—Ç—É–ø–∞:', aspectMultiplier.toFixed(2));
                
                const isMobile = window.innerWidth <= 768;
                const isTablet = window.innerWidth <= 1024;
                
                // –ë–∞–∑–æ–≤—ã–π –æ—Ç—Å—Ç—É–ø –æ—Ç –±–µ–≥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏
                let baseOffset;
                if (isMobile) {
                    baseOffset = 50;
                } else if (isTablet) {
                    baseOffset = 70;
                } else {
                    baseOffset = 80;
                }
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å aspect ratio
                const adjustedOffset = baseOffset * aspectMultiplier;
                textTopElement.style.top = `${adjustedOffset}px`;
                console.log('üîº –û—Ç—Å—Ç—É–ø –∑–∞–≥–æ–ª–æ–≤–∫–∞ —É–≤–µ–ª–∏—á–µ–Ω —Å', currentOffset, '–¥–æ', Math.round(adjustedOffset));
            }
        }

        async function loadRandomArtwork() {
            const app = document.getElementById('app');
            
            try {
                console.log('üîÑ –ó–∞–ø—Ä–æ—Å –∫:', `${FUNCTION_URL}/api/artworks/random`);
                
                const response = await fetch(`${FUNCTION_URL}/api/artworks/random`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('‚úÖ –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:', data);
                console.log('üìä –î–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ data.data:', data.data?.length);
                
                if (data.data && data.data.length > 0) {
                    app.innerHTML = renderArtwork(data.data[0]);
                } else {
                    console.log('‚ö†Ô∏è –ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É...');
                    setTimeout(() => location.reload(), 500);
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞:', error);
                app.innerHTML = `<div class="loading">–∂–∏–≤—É-–≤–∏–∂—É</div>`;
                setTimeout(() => location.reload(), 1000);
            }
        }

        // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', () => {
            const titleElement = document.querySelector('.title');
            const textTopElement = document.querySelector('.text-top');
            const imgElement = document.querySelector('.image-mask img');
            
            if (titleElement && textTopElement) {
                const titleLength = titleElement.textContent.length;
                const fontSize = calculateTitleFontSize(titleLength);
                const titleHeight = calculateTitleHeight(titleElement.textContent, fontSize);
                const titleLines = calculateTitleLines(titleElement.textContent, fontSize);
                const titleTopOffset = calculateTitleTopOffset(titleHeight, titleLines, imgElement ? imgElement.src : '');
                
                titleElement.style.fontSize = `${fontSize}rem`;
                textTopElement.style.top = `${titleTopOffset}px`;
            }
        });

        window.addEventListener('DOMContentLoaded', loadRandomArtwork);
    </script>
</body>
</html>
